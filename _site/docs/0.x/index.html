<!DOCTYPE html>
<html lang="en">
<head>
    <link href="/assets/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link href="/assets/code.css" rel="stylesheet" type="text/css" />
    <link href="/assets/toc.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
  <!--  <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon-180x180.png"/>
    <link rel="manifest" href="/site.webmanifest"/>
    <meta name="viewport" content="width=device-width"/>
    <meta charSet="utf-8"/>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml"/>--><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Getting Started - CrowPHP an expressive framework for PHP | Web framework for PHP</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Getting Started - CrowPHP an expressive framework for PHP" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Fast un-opinionated minimalist web framework and server for PHP built on top of battle tested Async PHP servers (SwoolePHP and ReactPHP). CrowPHP lets you build real microservices in PHP without the use of PHP-FPM/Nginx or Apache." />
<meta property="og:description" content="Fast un-opinionated minimalist web framework and server for PHP built on top of battle tested Async PHP servers (SwoolePHP and ReactPHP). CrowPHP lets you build real microservices in PHP without the use of PHP-FPM/Nginx or Apache." />
<link rel="canonical" href="http://localhost:4000/docs/0.x/" />
<meta property="og:url" content="http://localhost:4000/docs/0.x/" />
<meta property="og:site_name" content="Web framework for PHP" />
<script type="application/ld+json">
{"@type":"WebPage","url":"http://localhost:4000/docs/0.x/","headline":"Getting Started - CrowPHP an expressive framework for PHP","description":"Fast un-opinionated minimalist web framework and server for PHP built on top of battle tested Async PHP servers (SwoolePHP and ReactPHP). CrowPHP lets you build real microservices in PHP without the use of PHP-FPM/Nginx or Apache.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Web framework for PHP" /></head>

<body>
    <div class="container">
        <div class="row">
            <nav class="col-md-3 d-none d-md-block bg-light sidebar">
                <div class="sidebar-sticky">
                  <div class="container" style="margin-top: 20px;">
                    <a class="navbar-brand" href="/">
                        <img src="/assets/crow-logo.svg" alt="" width="200">
                    </a>
                  </div>
                  
                  <ul class="nav flex-column">
    <li class="nav-item">
        <a class="nav-link" href="/docs/0.x">
            Getting Started
        </a>
        <ul class="sub-nav">
            <li class="nav-item">
                <a class="nav-link" href="/docs/0.x/#why-crowphp">
                    Why CrowPHP?
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/docs/0.x/#your-first-crowphp-microservice">
                    Your First CrowPHP Microservice
                </a>
            </li>
        </ul>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/docs/0.x/routing">
            Routing
        </a>
        <ul class="sub-nav">
            <li class="nav-item">
                <a class="nav-link" href="/docs/0.x/routing/#route-methods">
                    Route methods
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/docs/0.x/routing/#route-paths">
                    Route paths
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/docs/0.x/routing/#route-parameters">
                    Route parameters
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/docs/0.x/routing/#route-groups">
                    Route groups
                </a>
            </li>
        </ul>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="/docs/0.x/middlewares">
            Middlewares
        </a>

        <ul class="sub-nav">
            <li class="nav-item">
                <a class="nav-link" href="/docs/0.x/middlewares/#defining-a-middleware">
                    Defining a middleware
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/docs/0.x/middlewares/#types-of-middlewares">
                    Types of middlewares
                </a>
            </li>


        </ul>
    </li>
</ul>


                </div>
              </nav>

              <main role="main" class="col-md-9 ml-sm-auto px-4"><div style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;" class="chartjs-size-monitor"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                  <h1 class="h2">Documentation</h1>
                  <!-- <div class="btn-toolbar mb-2 mb-md-0">
                    <div class="btn-group mr-2">
                      <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                      This week
                    </button>
                  </div> -->

                </div>
                <div class="toc_container">
                  <ul id="toc" class="table-of-contents">
<li class="toc_item toc-h1"><a href="#why-crowphp">Why CrowPHP?</a></li>
<li class="toc_item toc-h1"><a href="#your-first-crowphp-microservice">Your First CrowPHP Microservice</a>
<ul>
<li class="toc_item toc-h2"><a href="#docker-example">Docker Example</a></li>
</ul>
</li>
</ul>
                </div>
                <h1 id="why-crowphp">
<a class="anchor" href="#why-crowphp" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why CrowPHP?</h1>

<p>PHP has grown a lot as a language it has a mature ecosystem and a vibrant community, for PHP to become a goto language for modern-microservices and container oriented ecosystem we lacked a way to deploy our web services in a stand-alone PHP, well not any more, with the advancements in asynchronous and concurrent PHP environment provided by platforms like SwoolePHP and ReactPHP it’s not a dream any more to run your web services on stand-alone PHP and here comes CrowPHP to provide an elegant and un-opinionated framework on top of SwoolePHP and ReactPHP HTTP servers.</p>

<h1 id="your-first-crowphp-microservice">
<a class="anchor" href="#your-first-crowphp-microservice" aria-hidden="true"><span class="octicon octicon-link"></span></a>Your First CrowPHP Microservice</h1>

<p>Before we start with the crowPHP lets make sure you have the right system requirements.</p>

<ul>
  <li>PHP-CLI version 8 or above.</li>
  <li>composer package manager for PHP</li>
  <li>PHP pear package manager <code class="language-plaintext highlighter-rouge">pecl</code>
</li>
  <li>SwoolePHP latest version <code class="language-plaintext highlighter-rouge">pecl install swoole</code>
</li>
</ul>

<h2 id="docker-example">
<a class="anchor" href="#docker-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Docker Example</h2>
<p>To follow this example I am assuming that you are familiar with <code class="language-plaintext highlighter-rouge">docker</code> and <code class="language-plaintext highlighter-rouge">docker-compose</code> and the latest versions are installed on your system.</p>

<p>Let’s start with a new <code class="language-plaintext highlighter-rouge">composer.json</code> file in your project.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"helloworld"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your Name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your@email.com"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"require"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"crowphp/crow"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.3.1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Now let’s create a new PHP file in the root of your project <code class="language-plaintext highlighter-rouge">index.php</code>. In this file, we will be created a new CrowPHP server and a route that will serve our request.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="kn">use</span> <span class="nn">Psr\Http\Message\ResponseInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Psr\Http\Message\ServerRequestInterface</span> <span class="k">as</span> <span class="n">RequestInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Crow\Http\Server\Factory</span> <span class="k">as</span> <span class="n">CrowServer</span><span class="p">;</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="nx">CrowServer</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="nx">CrowServer</span><span class="o">::</span><span class="na">SWOOLE_SERVER</span><span class="p">);</span>
<span class="nv">$router</span> <span class="o">=</span> <span class="nx">Crow\Router\Factory</span><span class="o">::</span><span class="na">make</span><span class="p">();</span>

<span class="nv">$router</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">RequestInterface</span> <span class="nv">$request</span><span class="p">,</span> <span class="nx">ResponseInterface</span> <span class="nv">$response</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">(</span><span class="s1">'Hello World!'</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">});</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">withRouter</span><span class="p">(</span><span class="nv">$router</span><span class="p">);</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">on</span><span class="p">(</span><span class="s1">'start'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$server</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"CrowPHP server is listening on port </span><span class="nv">$server-&gt;host</span><span class="s2">:</span><span class="nv">$server-&gt;port</span><span class="s2"> "</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">});</span>

<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">listen</span><span class="p">(</span><span class="mi">5000</span><span class="p">,</span> <span class="s2">"0.0.0.0"</span><span class="p">);</span>

</code></pre></div></div>

<p>First, we have imported the generic <code class="language-plaintext highlighter-rouge">vendor/autoload.php</code> that will provide us with the resolutions of all the necessary <code class="language-plaintext highlighter-rouge">namespaces</code> and classes. We are using standard <code class="language-plaintext highlighter-rouge">PSR</code> request and response interfaces, which are supported by CrowPHP.</p>

<p>We are then creating an <code class="language-plaintext highlighter-rouge">$app</code> instance from the <code class="language-plaintext highlighter-rouge">CrowServer::create</code> method by passing a single integer constant <code class="language-plaintext highlighter-rouge">CrowServer::SWOOLE_SERVER</code> this is important because CrowPHP also supports ReactPHP server but for this example; we are going to stick with <code class="language-plaintext highlighter-rouge">SwoolePHP</code> as its more production-ready at the moment.</p>

<p>After that we are making a <code class="language-plaintext highlighter-rouge">$router</code> instance from the router factory i.e. <code class="language-plaintext highlighter-rouge">Crow\Router\Factory::make</code>, with router instance in the next step we call a <code class="language-plaintext highlighter-rouge">get</code> method to create a new route which accepts to parameters i.e. <code class="language-plaintext highlighter-rouge">{path}</code> and a <code class="language-plaintext highlighter-rouge">{handler}</code>. Handler is a <code class="language-plaintext highlighter-rouge">callback</code> function and it provides <code class="language-plaintext highlighter-rouge">$request</code> and <code class="language-plaintext highlighter-rouge">$response</code> instances that expect the instance of <code class="language-plaintext highlighter-rouge">ResponseInterface</code> to be returned.</p>

<p>Now the instance of the router is attached to the main app instance with the <code class="language-plaintext highlighter-rouge">$app-&gt;withRouter</code> method and we have attached a listener for the <code class="language-plaintext highlighter-rouge">start</code> event just to log in when the server is ready to accept new requests.</p>

<p>At last, we have called the <code class="language-plaintext highlighter-rouge">listen</code> method with <code class="language-plaintext highlighter-rouge">5000</code> port and <code class="language-plaintext highlighter-rouge">0.0.0.0</code> as host since we are running in the Docker container.</p>

<h3 id="docker-file">Docker File</h3>

<p>Now let’s create a new <code class="language-plaintext highlighter-rouge">Dockerfile</code> in the root your project with following contents, and ofcourse you can modify it to your liking :)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM php:8.0-cli-buster

RUN apt update <span class="o">&amp;&amp;</span> apt upgrade <span class="nt">-y</span>
RUN apt <span class="nb">install </span>zip unzip libzip-dev git <span class="nt">-y</span>
<span class="c"># Install PHP extensions</span>
RUN pecl <span class="nb">install </span>swoole <span class="se">\</span>
    <span class="o">&amp;&amp;</span> pecl <span class="nb">install </span>zip <span class="se">\</span>
    <span class="o">&amp;&amp;</span> docker-php-ext-enable swoole zip

RUN <span class="nb">mv</span> /usr/local/etc/php/php.ini-development /usr/local/etc/php/php.ini
<span class="c"># Install Composer</span>
RUN curl <span class="nt">-sS</span> https://getcomposer.org/installer | php <span class="nt">--</span> <span class="nt">--install-dir</span><span class="o">=</span>/usr/local/bin <span class="nt">--filename</span><span class="o">=</span>composer

WORKDIR /code

ADD entry.sh /usr/bin/entry.sh
EXPOSE 5000/tcp
ENTRYPOINT <span class="o">[</span> <span class="s2">"/usr/bin/entry.sh"</span> <span class="o">]</span>
</code></pre></div></div>

<p>If you notice we are adding a file <code class="language-plaintext highlighter-rouge">entry.sh</code> in our docker file lets create that file in the root of our project.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
composer <span class="nb">install
</span>php index.php
</code></pre></div></div>

<p>It can’t be more simpler, we are installing composer when the container starts for the first time followed by execution of our PHP server.</p>

<h3 id="docker-compose-file">Docker Compose File</h3>

<p>Finally to make our project easier to manage for the next time we will be using docker-compose and this step is (optional). Let’s create a new <code class="language-plaintext highlighter-rouge">docker-composer.yaml</code> file in the root of the project.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">5000:5000"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">.:/code</span>
</code></pre></div></div>

<p>Now, we can finally run our project with <code class="language-plaintext highlighter-rouge">docker-compose up</code> and our service should be ready to recieve requests on <code class="language-plaintext highlighter-rouge">http://localhost:5000</code></p>

                </div>

              </main>
        </div>

    </div>

<footer>
    <!-- Grid container -->
    <div class="container text-center p-4">
        <!--Grid row-->
        <div class="row">
            <div class="col">
                <nav class="navbar navbar-expand-lg navbar-light">

                    <div class="collapse navbar-collapse">
                        <ul class="navbar-nav mx-auto">
                            <li class="nav-item"><a class="nav-link" href="/">Home </a></li>
                            <li class="nav-item"><a class="nav-link" href="/#installation"> Installation </a></li>
                            <li class="nav-item"><a class="nav-link" href="#"> Documentation </a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            <div class="col text-center">
                <img src="https://github.com/crowphp/crow/workflows/build/badge.svg">
                <img src="https://img.shields.io/github/license/crowphp/crow">
                <img src="https://img.shields.io/endpoint?url=https://badger.crowphp.com/coverage/master">
            </div>
        </div>
        <!--Grid row-->
    </div>
    <!-- Grid container -->

    <!-- Copyright -->
    <div class="text-center pb-5">
        © 2021 Copyright crowphp.com
    </div>
    <!-- Copyright -->
</footer>


</body>
</html>
